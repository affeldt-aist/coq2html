
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module mathcomp.classical.fsbigop</title>
<meta name="description" content="Documentation of Coq module mathcomp.classical.fsbigop" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module mathcomp.classical.fsbigop</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">all_ssreflect</span> <span class="id">ssralg</span> <span class="id">ssrnum</span> <span class="id">ssrint</span> <span class="id">interval</span> <span class="id">finmap</span>.<br/>
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html">mathcomp_extra</a></span> <span class="id"><a href="mathcomp.classical.boolp.html">boolp</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html">classical_sets</a></span> <span class="id"><a href="mathcomp.classical.functions.html">functions</a></span>.<br/>
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="mathcomp.classical.cardinality.html">cardinality</a></span>.<br/>
<br/>
<pre>
(******************************************************************************)
(*                     Finitely-supported big operators                       *)
(*                                                                            *)
(*     finite_support idx D F := D `&amp;` F @^-1` [set~ idx]                     *)
(* \big[op/idx]_(i \in A) F i == iterated application of the operator op      *)
(*                               with neutral idx over finite_support idx A F *)
(*         \sum_(i \in A) F i == iterated addition, in ring_scope             *)
(*                                                                            *)
(******************************************************************************)
</pre>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "\<span class="id">big</span> [ <span class="id">op</span> / <span class="id">idx</span> ]<span class="id">_</span> ( <span class="id">i</span> '\<span class="kwd">in</span>' <span class="id">A</span> ) <span class="id">F</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 36, <span class="id">F</span> <span class="kwd">at</span> <span class="id">level</span> 36, <span class="id">op</span>, <span class="id">idx</span> <span class="kwd">at</span> <span class="id">level</span> 10, <span class="id">i</span>, <span class="id">A</span> <span class="kwd">at</span> <span class="id">level</span> 50,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "'[' \<span class="id">big</span> [ <span class="id">op</span> / <span class="id">idx</span> ]<span class="id">_</span> ( <span class="id">i</span>  '\<span class="kwd">in</span>'  <span class="id">A</span> ) '/  '  <span class="id">F</span> ']'").<br/>
<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "\<span class="id">sum_</span> ( <span class="id">i</span> '\<span class="kwd">in</span>' <span class="id">A</span> ) <span class="id">F</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">F</span> <span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">i</span>, <span class="id">A</span> <span class="kwd">at</span> <span class="id">level</span> 50,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "'[' \<span class="id">sum_</span> ( <span class="id">i</span>  '\<span class="kwd">in</span>'  <span class="id">A</span> ) '/  '  <span class="id">F</span> ']'").<br/>
<br/>
<span class="kwd">Set</span> <span class="kwd">Implicit</span> <span class="kwd">Arguments</span>.<br/>
<span class="id">Unset</span> <span class="id">Strict</span> <span class="kwd">Implicit</span>.<br/>
<span class="id">Unset</span> <span class="id">Printing</span> <span class="kwd">Implicit</span> <span class="id">Defensive</span>.<br/>
<span class="kwd">Import</span> <span class="id">Order.TTheory</span> <span class="id">GRing.Theory</span> <span class="id">Num.Def</span> <span class="id">Num.Theory</span>.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">classical_set_scope</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ring_scope</span>.<br/>
<br/>
<span class="kwd">Notation</span> "\<span class="id">big</span> [ <span class="id">op</span> / <span class="id">idx</span> ]<span class="id">_</span> ( <span class="id">i</span> '\<span class="kwd">in</span>' <span class="id">A</span> ) <span class="id">F</span>" :=<br/>
&nbsp;&nbsp;(\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> &lt;- <span class="id"><a href="mathcomp.classical.cardinality.html#fset_set">fset_set</a></span> (<span class="id">A</span> `&amp;` ((<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="id">F</span>) @^-1` [<span class="id">set</span>~ <span class="id">idx</span>]))) <span class="id">F</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">only</span> <span class="id">parsing</span>) : <span class="id">big_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="finite_index_key">finite_index_key</a></span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
 <span class="id">exact</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#tt">tt</a></span>. Qed.</div>
<span class="kwd">Definition</span> <span class="id"><a name="finite_support">finite_support</a></span> {<span class="id">I</span> : <span class="id">choiceType</span>} {<span class="id">T</span> : <span class="kwd">Type</span>} (<span class="id">idx</span> : <span class="id">T</span>) (<span class="id">D</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">T</span>) : <span class="id">seq</span> <span class="id">I</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#locked_with">locked_with</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_index_key">finite_index_key</a></span> (<span class="id"><a href="mathcomp.classical.cardinality.html#fset_set">fset_set</a></span> (<span class="id">D</span> `&amp;` <span class="id">F</span> @^-1` [<span class="id">set</span>~ <span class="id">idx</span>] : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>)).<br/>
<span class="kwd">Notation</span> "\<span class="id">big</span> [ <span class="id">op</span> / <span class="id">idx</span> ]<span class="id">_</span> ( <span class="id">i</span> '\<span class="kwd">in</span>' <span class="id">D</span> ) <span class="id">F</span>" :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> &lt;- <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> <span class="id">idx</span> <span class="id">D</span> (<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="id">F</span>)) <span class="id">F</span>)<br/>
&nbsp;&nbsp;: <span class="id">big_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="in_finite_support">in_finite_support</a></span> (<span class="id">T</span> : <span class="kwd">Type</span>) (<span class="id">J</span> : <span class="id">choiceType</span>) (<span class="id">i</span> : <span class="id">T</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">J</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">F</span> : <span class="id">J</span> -&gt; <span class="id">T</span>) : <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> (<span class="id">P</span> `&amp;` <span class="id">F</span> @^-1` [<span class="id">set</span>~ <span class="id">i</span>]) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> <span class="id">i</span> <span class="id">P</span> <span class="id">F</span> =<span class="id">i</span> <span class="id">P</span> `&amp;` <span class="id">F</span> @^-1` [<span class="id">set</span>~ <span class="id">i</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">finF</span> <span class="id">j</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#unlock">unlock</a></span> <span class="id"><a href="mathcomp.classical.cardinality.html#in_fset_set">in_fset_set</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="finite_support_uniq">finite_support_uniq</a></span> (<span class="id">T</span> : <span class="kwd">Type</span>) (<span class="id">J</span> : <span class="id">choiceType</span>) (<span class="id">i</span> : <span class="id">T</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">J</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">F</span> : <span class="id">J</span> -&gt; <span class="id">T</span>) : <span class="id">uniq</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> <span class="id">i</span> <span class="id">P</span> <span class="id">F</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#unlock">unlock</a></span>; <span class="id">exact</span>: <span class="id">fset_uniq</span>. Qed.</div>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">finite_support_uniq</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="no_finite_support">no_finite_support</a></span> (<span class="id">T</span> : <span class="kwd">Type</span>) (<span class="id">J</span> : <span class="id">choiceType</span>) (<span class="id">i</span> : <span class="id">T</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">J</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">F</span> : <span class="id">J</span> -&gt; <span class="id">T</span>) : <span class="id"><a href="mathcomp.classical.cardinality.html#infinite_set">infinite_set</a></span> (<span class="id">P</span> `&amp;` <span class="id">F</span> @^-1` [<span class="id">set</span>~ <span class="id">i</span>]) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> <span class="id">i</span> <span class="id">P</span> <span class="id">F</span> = [::].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
<span class="id">move</span>=&gt; <span class="id">infinF</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#unlock">unlock</a></span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.cardinality.html#fset_set">fset_set</a></span>/=; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.boolp.html#pselect">pselect</a></span> =&gt; //.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eq_finite_support">eq_finite_support</a></span> {<span class="id">I</span> : <span class="id">choiceType</span>} {<span class="id">T</span> : <span class="kwd">Type</span>} (<span class="id">idx</span> : <span class="id">T</span>) (<span class="id">D</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">F</span> <span class="id">G</span> : <span class="id">I</span> -&gt; <span class="id">T</span>) : {<span class="kwd">in</span> <span class="id">D</span>, <span class="id">F</span> =1 <span class="id">G</span>} -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> <span class="id">idx</span> <span class="id">D</span> <span class="id">F</span> = <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> <span class="id">idx</span> <span class="id">D</span> <span class="id">G</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">eqFG</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> !<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#unlock">unlock</a></span>// (<span class="id"><a href="mathcomp.classical.classical_sets.html#eq_preimage">eq_preimage</a></span> <span class="id">_</span> <span class="id">eqFG</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Variant</span> <span class="id"><a name="finite_support_spec">finite_support_spec</a></span> <span class="id">R</span> (<span class="id">T</span> : <span class="id">choiceType</span>)<br/>
&nbsp;&nbsp;(<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) (<span class="id">F</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) (<span class="id">idx</span> : <span class="id">R</span>) : <span class="id">seq</span> <span class="id">T</span> -&gt; <span class="kwd">Type</span> :=<br/>
| <span class="id"><a name="NoFiniteSupport">NoFiniteSupport</a></span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.cardinality.html#infinite_set">infinite_set</a></span> (<span class="id">P</span> `&amp;` <span class="id">F</span> @^-1` [<span class="id">set</span>~ <span class="id">idx</span>]) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">finite_support_spec</span> <span class="id">P</span> <span class="id">F</span> <span class="id">idx</span> [::]<br/>
| <span class="id"><a name="FiniteSupport">FiniteSupport</a></span> (<span class="id">X</span> : {<span class="id">fset</span> <span class="id">T</span>}) <span class="id">of</span> [<span class="id">set</span>` <span class="id">X</span>] `&lt;=` <span class="id">P</span><br/>
&nbsp;&nbsp;&nbsp;&amp; (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">i</span> \<span class="id">notin</span> <span class="id">X</span> -&gt; <span class="id">F</span> <span class="id">i</span> = <span class="id">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&amp; [<span class="id">set</span>` <span class="id">X</span>] = (<span class="id">P</span> `&amp;` <span class="id">F</span> @^-1` [<span class="id">set</span>~ <span class="id">idx</span>]) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">finite_support_spec</span> <span class="id">P</span> <span class="id">F</span> <span class="id">idx</span> <span class="id">X</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="finite_supportP">finite_supportP</a></span> <span class="id">R</span> (<span class="id">T</span> : <span class="id">choiceType</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) (<span class="id">F</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) (<span class="id">idx</span> : <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support_spec">finite_support_spec</a></span> <span class="id">P</span> <span class="id">F</span> <span class="id">idx</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> <span class="id">idx</span> <span class="id">P</span> <span class="id">F</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#unlock">unlock</a></span>/= /<span class="id"><a href="mathcomp.classical.cardinality.html#fset_set">fset_set</a></span>.<br/>
<span class="id">case</span>: <span class="id"><a href="mathcomp.classical.boolp.html#pselect">pselect</a></span>=&gt; // <span class="id">Xfin</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">constructor</span>.<br/>
<span class="id">case</span>: <span class="id"><a href="mathcomp.classical.boolp.html#cid">cid</a></span> =&gt; //= <span class="id">X</span> <span class="id">eqX</span>; <span class="id">constructor</span>; <span class="id">rewrite</span> -?<span class="id">eqX</span>//.<br/>
<span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">Pi</span> <span class="id">NXi</span> /=; <span class="id">have</span> : (<span class="id">P</span> `\` [<span class="id">set</span>` <span class="id">X</span>]) <span class="id">i</span> <span class="kwd">by</span> <span class="id">split</span>=&gt; //=; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">negP</a></span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">eqX</span> /= =&gt; -[<span class="id">_</span>]; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.boolp.html#contra_notP">contra_notP</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Notation</span> "\<span class="id">sum_</span> ( <span class="id">i</span> '\<span class="kwd">in</span>' <span class="id">A</span> ) <span class="id">F</span>" := (\<span class="id">big</span>[+%<span class="id">R</span>/0%<span class="id">R</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span>) <span class="id">F</span>) : <span class="id">ring_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eq_fsbigl">eq_fsbigl</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">R</span> -&gt; <span class="id">R</span> -&gt; <span class="id">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">T</span> : <span class="id">choiceType</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) (<span class="id">P</span> <span class="id">Q</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id">P</span> = <span class="id">Q</span> -&gt; \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">x</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">f</span> <span class="id">x</span> = \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">x</span> \<span class="kwd">in</span> <span class="id">Q</span>) <span class="id">f</span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; -&gt;. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eq_fsbigr">eq_fsbigr</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">T</span> : <span class="id">choiceType</span>) (<span class="id">f</span> <span class="id">g</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;{<span class="kwd">in</span> <span class="id">P</span>, <span class="id">f</span> =1 <span class="id">g</span>} -&gt; (\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">x</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">f</span> <span class="id">x</span> = \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">x</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">g</span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
<span class="id">move</span>=&gt; <span class="id">fg</span>; <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#eq_finite_support">eq_finite_support</a></span> <span class="id">_</span> <span class="id">fg</span>); <span class="id">apply</span>: <span class="id">eq_big_seq</span> =&gt; <span class="id">x</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP</a></span> =&gt; //= <span class="id">X</span> <span class="id">XP</span> <span class="id">_</span> <span class="id">gidx</span> <span class="id">xX</span>; <span class="id">rewrite</span> <span class="id">fg</span> // ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>; <span class="id">apply</span>/<span class="id">XP</span>.<br/>
Qed.</div>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#eq_fsbigr">eq_fsbigr</a></span> {<span class="id">R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">T</span> <span class="id">f</span>} <span class="id">g</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbigTE">fsbigTE</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>) (<span class="id">T</span> : <span class="id">choiceType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">A</span> : {<span class="id">fset</span> <span class="id">T</span>}) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">i</span> \<span class="id">notin</span> <span class="id">A</span> -&gt; <span class="id">f</span> <span class="id">i</span> = <span class="id">idx</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> [<span class="id">set</span>: <span class="id">T</span>]) <span class="id">f</span> <span class="id">i</span> = \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> &lt;- <span class="id">A</span>) <span class="id">f</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
<span class="id">elim</span>/<span class="id"><a href="mathcomp.classical.boolp.html#Peq">Peq</a></span>: <span class="id">R</span> =&gt; <span class="id">R</span> <span class="kwd">in</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">f</span> *.<br/>
<span class="id">move</span>=&gt; <span class="id">Af</span>; <span class="id">have</span> <span class="id">Afin</span> : <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> (<span class="id">f</span> @^-1` [<span class="id">set</span>~ <span class="id">idx</span>]).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: (<span class="id"><a href="mathcomp.classical.cardinality.html#finite_subfset">finite_subfset</a></span> <span class="id">A</span>) =&gt; <span class="id">x</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.boolp.html#contra_notT">contra_notT</a></span> =&gt; /<span class="id">Af</span>.<br/>
<span class="id">rewrite</span> [<span class="kwd">in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS</a></span>](<span class="id">big_fsetID</span> <span class="id">_</span> [<span class="id">pred</span> <span class="id">x</span> | <span class="id">f</span> <span class="id">x</span> == <span class="id">idx</span>])/=.<br/>
<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> = <span class="id">op</span> <span class="id">X</span> <span class="id">_</span>]<span class="id">big_fset</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> = <span class="id">op</span> <span class="id">X</span> <span class="id">_</span>]<span class="id">big1</span> ?<span class="id">Monoid.simpm</span>//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span> /= /<span class="id">eqP</span>.<br/>
<span class="id">apply</span> <span class="id">eq_fbigl</span> =&gt; <span class="id">r</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#in_finite_support">in_finite_support</a></span>// ?<span class="id"><a href="mathcomp.classical.classical_sets.html#setTI">setTI</a></span>// /<span class="id"><a href="mathcomp.classical.classical_sets.html#preimage">preimage</a></span>/=; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#idP">idP</a></span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#idP">idP</a></span> =&gt; /=.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> !<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>/=; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.boolp.html#contra_notP">contra_notP</a></span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">negP</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negb_and">negb_and</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbK">negbK</a></span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#orP">orP</a></span>[|/<span class="id">eqP</span>//]; <span class="id">exact</span>: <span class="id">Af</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>/= =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[<span class="id">_</span> /<span class="id">eqP</span>].<br/>
Qed.</div>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigTE">fsbigTE</a></span> {<span class="id">R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">T</span>} <span class="id">A</span> <span class="id">f</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbig_mkcond">fsbig_mkcond</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">T</span> : <span class="id">choiceType</span>) (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span>) <span class="id">f</span> <span class="id">i</span> =<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> [<span class="id">set</span>: <span class="id">T</span>]) <span class="id"><a href="mathcomp.classical.functions.html#patch">patch</a></span> (<span class="kwd">fun</span>=&gt; <span class="id">idx</span>) <span class="id">A</span> <span class="id">f</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
<span class="id">elim</span>/<span class="id"><a href="mathcomp.classical.boolp.html#Peq">Peq</a></span>: <span class="id">R</span> =&gt; <span class="id">R</span> <span class="kwd">in</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">f</span> *.<br/>
<span class="id">rewrite</span> -<span class="id">big_mkcond</span>/= -[<span class="kwd">in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS</a></span>]<span class="id">big_filter</span>; <span class="id">apply</span>: <span class="id">perm_big</span>.<br/>
<span class="id">rewrite</span> <span class="id">uniq_perm</span> ?<span class="id">filter_uniq</span>//= =&gt; <span class="id">i</span>; <span class="id">rewrite</span> <span class="id">mem_filter</span>.<br/>
<span class="id">set</span> <span class="id">g</span> := <span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="kwd">if</span> <span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span> <span class="kwd">then</span> <span class="id">f</span> <span class="id">i</span> <span class="kwd">else</span> <span class="id">idx</span>.<br/>
<span class="id">have</span> <span class="id">gAf</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> `&amp;` <span class="id">g</span> @^-1` [<span class="id">set</span>~ <span class="id">idx</span>] = (<span class="id">A</span> `&amp;` <span class="id">f</span> @^-1` [<span class="id">set</span>~ <span class="id">idx</span>]).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setTI">setTI</a></span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#predeqP">predeqP</a></span> =&gt; <span class="id">x</span>; <span class="id">split</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#preimage">preimage</a></span>/<span class="id">g</span>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span>; <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>, <span class="id"><a href="mathcomp.classical.classical_sets.html#notin_set">notin_set</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span>; <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>, <span class="id"><a href="mathcomp.classical.classical_sets.html#notin_set">notin_set</a></span>) =&gt; ? [].<br/>
<span class="id">case</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP</a></span> =&gt; //.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">gAf</span>; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP</a></span>=&gt; //=; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbF">andbF</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">X</span> <span class="id">_</span> <span class="id">gidx</span> &lt;-//.<br/>
<span class="id">move</span>=&gt; <span class="id">X</span> <span class="id">XA</span> <span class="id">fidx</span> <span class="id">XE</span>; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP</a></span>; <span class="id">rewrite</span> <span class="id">gAf</span> -?<span class="id">XE</span>//=.<br/>
<span class="id">move</span>=&gt; <span class="id">Y</span> <span class="id">_</span> <span class="id">gidx</span> /<span class="id"><a href="mathcomp.classical.boolp.html#predeqP">predeqP</a></span>/=/(<span class="id">_</span> <span class="id">_</span>)/<span class="id"><a href="mathcomp.classical.boolp.html#propext">propext</a></span> <span class="id">YX</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#idP">idP</a></span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span> =&gt; [|[]]; <span class="id">rewrite</span> <span class="id">YX</span>// <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> =&gt; <span class="id">Xi</span>; <span class="id">split</span>=&gt; //; <span class="id">apply</span>: <span class="id">XA</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbig_mkcondr">fsbig_mkcondr</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">T</span> : <span class="id">choiceType</span>) (<span class="id">I</span> <span class="id">J</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) (<span class="id">a</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">I</span> `&amp;` <span class="id">J</span>) <span class="id">a</span> <span class="id">i</span> =<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">I</span>) <span class="kwd">if</span> <span class="id">i</span> \<span class="kwd">in</span> <span class="id">J</span> <span class="kwd">then</span> <span class="id">a</span> <span class="id">i</span> <span class="kwd">else</span> <span class="id">idx</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_mkcond">fsbig_mkcond</a></span> [<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS</a></span>]<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_mkcond">fsbig_mkcond</a></span>.<br/>
<span class="kwd">by</span> <span class="id">under</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#eq_fsbigr">eq_fsbigr</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#patch_setI">patch_setI</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbig_mkcondl">fsbig_mkcondl</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">T</span> : <span class="id">choiceType</span>) (<span class="id">I</span> <span class="id">J</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) (<span class="id">a</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">I</span> `&amp;` <span class="id">J</span>) <span class="id">a</span> <span class="id">i</span> =<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">J</span>) <span class="kwd">if</span> <span class="id">i</span> \<span class="kwd">in</span> <span class="id">I</span> <span class="kwd">then</span> <span class="id">a</span> <span class="id">i</span> <span class="kwd">else</span> <span class="id">idx</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_mkcond">fsbig_mkcond</a></span> [<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS</a></span>]<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_mkcond">fsbig_mkcond</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIC">setIC</a></span>.<br/>
<span class="kwd">by</span> <span class="id">under</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#eq_fsbigr">eq_fsbigr</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#patch_setI">patch_setI</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bigfs">bigfs</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>) (<span class="id">T</span> : <span class="id">choiceType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">r</span> : <span class="id">seq</span> <span class="id">T</span>) (<span class="id">P</span> : {<span class="id">pred</span> <span class="id">T</span>}) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) : <span class="id">uniq</span> <span class="id">r</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">i</span> \<span class="id">notin</span> <span class="id">r</span> -&gt; <span class="id">f</span> <span class="id">i</span> = <span class="id">idx</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> &lt;- <span class="id">r</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">f</span> <span class="id">i</span> = \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> [<span class="id">set</span>` <span class="id">P</span>]) <span class="id">f</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
<span class="id">move</span>=&gt; <span class="id">r_uniq</span> <span class="id">fidx</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_mkcond">fsbig_mkcond</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigTE">fsbigTE</a></span> [<span class="id">fset</span> <span class="id">x</span> | <span class="id">x</span> <span class="kwd">in</span> <span class="id">r</span>]%<span class="id">fset</span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>/= /<span class="id"><a href="mathcomp.classical.functions.html#patch">patch</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#mem_setE">mem_setE</a></span>; <span class="id">case</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP</a></span>=&gt; // + /<span class="id">fidx</span>-&gt;.<br/>
<span class="id">rewrite</span> -<span class="id">big_mkcond</span>; <span class="id">under</span> [<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS</a></span>]<span class="id">eq_bigl</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#mem_setE">mem_setE</a></span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">perm_big</span>; <span class="id">rewrite</span> <span class="id">uniq_perm</span>// =&gt; <span class="id">i</span>; <span class="id">rewrite</span> !<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbigE">fsbigE</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>) (<span class="id">T</span> : <span class="id">choiceType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) (<span class="id">r</span> : <span class="id">seq</span> <span class="id">T</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">uniq</span> <span class="id">r</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">set</span>` <span class="id">r</span>] `&lt;=` <span class="id">A</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">A</span> <span class="id">i</span> -&gt; <span class="id">i</span> \<span class="id">notin</span> <span class="id">r</span> -&gt; <span class="id">f</span> <span class="id">i</span> = <span class="id">idx</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span>) <span class="id">f</span> <span class="id">i</span> = \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> &lt;- <span class="id">r</span> | <span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span>) <span class="id">f</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
<span class="id">move</span>=&gt; <span class="id">r_uniq</span> <span class="id">rQ</span> <span class="id">fidx</span>; <span class="id">rewrite</span> [<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS</a></span>]<span class="id"><a href="mathcomp.classical.fsbigop.html#bigfs">bigfs</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem_set">set_mem_set</a></span>//=.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>; <span class="id">apply</span>: <span class="id">fidx</span>.<br/>
Qed.</div>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigE">fsbigE</a></span> {<span class="id">R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">T</span> <span class="id">A</span>}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbig_seq">fsbig_seq</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">r</span> : <span class="id">seq</span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">uniq</span> <span class="id">r</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">a</span> &lt;- <span class="id">r</span>) <span class="id">F</span> <span class="id">a</span> = \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">a</span> \<span class="kwd">in</span> [<span class="id">set</span>` <span class="id">r</span>]) <span class="id">F</span> <span class="id">a</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
<span class="id">move</span>=&gt; <span class="id">ur</span>; <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigE">fsbigE</a></span> <span class="id">r</span>)//=; <span class="id">last</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; + -&gt;.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#mem_setE">mem_setE</a></span> <span class="id">big_seq_cond</span> <span class="id">big_mkcondr</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbig1">fsbig1</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.law</span> <span class="id">idx</span>) (<span class="id">I</span> : <span class="id">choiceType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">F</span> <span class="id">i</span> = <span class="id">idx</span>) -&gt; \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = <span class="id">idx</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
<span class="id">move</span>=&gt; <span class="id">PF0</span>; <span class="id">rewrite</span> <span class="id">big1_seq</span>// =&gt; <span class="id">i</span>/=; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP</a></span>=&gt; //=.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">X</span> <span class="id">XP</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Xi</span>; <span class="id">rewrite</span> <span class="id">PF0</span>//; <span class="id">apply</span>/<span class="id">XP</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbig_dflt">fsbig_dflt</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.law</span> <span class="id">idx</span>) (<span class="id">I</span> : <span class="id">choiceType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#infinite_set">infinite_set</a></span> (<span class="id">P</span> `&amp;` <span class="id">F</span> @^-1` [<span class="id">set</span>~ <span class="id">idx</span>])-&gt; \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = <span class="id">idx</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
 <span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP</a></span>; <span class="id">rewrite</span> ?<span class="id">big_nil</span>// =&gt; <span class="id">X</span> <span class="id">_</span> <span class="id">_</span> &lt;-. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbig_widen">fsbig_widen</a></span> (<span class="id">T</span> : <span class="id">choiceType</span>) [<span class="id">R</span> : <span class="kwd">Type</span>] [<span class="id">idx</span> : <span class="id">R</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>) (<span class="id">P</span> <span class="id">D</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> `&lt;=` <span class="id">D</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">D</span> `\` <span class="id">P</span> `&lt;=` <span class="id">f</span> @^-1` [<span class="id">set</span> <span class="id">idx</span>] -&gt;<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">f</span> <span class="id">i</span> = \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">D</span>) <span class="id">f</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
<span class="id">move</span>=&gt; <span class="id">PD</span> <span class="id">DPf</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_mkcond">fsbig_mkcond</a></span> [<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS</a></span>]<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_mkcond">fsbig_mkcond</a></span>.<br/>
<span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#eq_fsbigr">eq_fsbigr</a></span> =&gt; <span class="id">x</span> <span class="id">_</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.functions.html#patch">patch</a></span>; <span class="id">case</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span>; <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>, <span class="id"><a href="mathcomp.classical.classical_sets.html#notin_set">notin_set</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Px</span>; <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifT">ifT</a></span>// <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>; <span class="id">apply</span>: <span class="id">PD</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Px</span>; <span class="id">case</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP</a></span> =&gt; //; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> =&gt; <span class="id">Dx</span>; <span class="id">rewrite</span> <span class="id">DPf</span>.<br/>
Qed.</div>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_widen">fsbig_widen</a></span> {<span class="id">T</span> <span class="id">R</span> <span class="id">idx</span> <span class="id">op</span>} <span class="id">P</span> <span class="id">D</span> <span class="id">f</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbig_supp">fsbig_supp</a></span> (<span class="id">T</span> : <span class="id">choiceType</span>) [<span class="id">R</span> : <span class="kwd">Type</span>] [<span class="id">idx</span> : <span class="id">R</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">f</span> <span class="id">i</span> = \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span> `&amp;` <span class="id">f</span> @^-1` [<span class="id">set</span>~ <span class="id">idx</span>]) <span class="id">f</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#esym">esym</a></span>/<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_widen">fsbig_widen</a></span> =&gt; // <span class="id">x</span> [<span class="id">Px</span> /<span class="id"><a href="mathcomp.classical.boolp.html#not_andP">not_andP</a></span>[]//=]; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#notK">notK</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbig_fwiden">fsbig_fwiden</a></span> (<span class="id">T</span> : <span class="id">choiceType</span>) [<span class="id">R</span> : <span class="id">eqType</span>] [<span class="id">idx</span> : <span class="id">R</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">r</span> : <span class="id">seq</span> <span class="id">T</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">P</span> `&lt;=` [<span class="id">set</span>` <span class="id">r</span>] -&gt;<br/>
&nbsp;&nbsp;<span class="id">uniq</span> <span class="id">r</span> -&gt;<br/>
&nbsp;&nbsp;[<span class="id">set</span> <span class="id">i</span> | <span class="id">i</span> \<span class="kwd">in</span> <span class="id">r</span>] `\` <span class="id">P</span> `&lt;=` <span class="id">f</span> @^-1` [<span class="id">set</span> <span class="id">idx</span>] -&gt;<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">f</span> <span class="id">i</span> = \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> &lt;- <span class="id">r</span>) <span class="id">f</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_widen">fsbig_widen</a></span> <span class="id">_</span> [<span class="id">set</span>` <span class="id">r</span>])// [<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS</a></span>]<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_seq">fsbig_seq</a></span>. Qed.</div>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_fwiden">fsbig_fwiden</a></span> {<span class="id">T</span> <span class="id">R</span> <span class="id">idx</span> <span class="id">op</span>} <span class="id">r</span> <span class="id">P</span> <span class="id">f</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbig_set0">fsbig_set0</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>) (<span class="id">T</span> : <span class="id">choiceType</span>)<br/>
&nbsp;&nbsp;(<span class="id">F</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) : \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">x</span> \<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>) <span class="id">F</span> <span class="id">x</span> = <span class="id">idx</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
 <span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigE">fsbigE</a></span> [::])// <span class="id">big_nil</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbig_set1">fsbig_set1</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>) (<span class="id">T</span> : <span class="id">choiceType</span>) <span class="id">x</span><br/>
&nbsp;&nbsp;(<span class="id">F</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) : \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">y</span> \<span class="kwd">in</span> [<span class="id">set</span> <span class="id">x</span>]) <span class="id">F</span> <span class="id">y</span> = <span class="id">F</span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
<span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigE">fsbigE</a></span> [:: <span class="id">x</span>])//= ?<span class="id">big_cons</span> ?<span class="id">big_nil</span> ?<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifT">ifT</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> ?<span class="id">Monoid.simpm</span>//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">y</span> /=; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> =&gt; /<span class="id">eqP</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span> -&gt;; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> <span class="id">eqxx</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="__deprecated__full_fsbigID">__deprecated__full_fsbigID</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> (<span class="id">A</span> `&amp;` <span class="id">F</span> @^-1` [<span class="id">set</span>~ <span class="id">idx</span>]) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span>) <span class="id">F</span> <span class="id">i</span> = <span class="id">op</span> (\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span> `&amp;` <span class="id">B</span>) <span class="id">F</span> <span class="id">i</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span> `&amp;` ~` <span class="id">B</span>) <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
<span class="id">move</span>=&gt; <span class="id">finF</span>.<br/>
<span class="id">have</span> <span class="id">fsbig_setI</span> <span class="id">C</span> : \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> &lt;-<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">fset</span> <span class="id">x</span> | <span class="id">x</span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.cardinality.html#fset_set">fset_set</a></span> (<span class="id">A</span> `&amp;` <span class="id">F</span> @^-1` [<span class="id">set</span>~ <span class="id">idx</span>]) &amp; <span class="id">x</span> \<span class="kwd">in</span> <span class="id">C</span>]%<span class="id">fset</span>) <span class="id">F</span> <span class="id">i</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span> `&amp;` <span class="id">C</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">eq_fbigl</span> =&gt; <span class="id">i</span> /=; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#idP">idP</a></span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#idP">idP</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> !<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>/= =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[+ <span class="id">Bi</span>]; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.cardinality.html#in_fset_set">in_fset_set</a></span>// <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> =&gt; -[<span class="id">Ai</span> <span class="id">Fi</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#unlock">unlock</a></span> <span class="id"><a href="mathcomp.classical.cardinality.html#in_fset_set">in_fset_set</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>// <span class="id"><a href="mathcomp.classical.classical_sets.html#setIAC">setIAC</a></span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> <span class="kwd">in</span> <span class="id">Bi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>/<span class="id"><a href="mathcomp.classical.cardinality.html#finite_setIl">finite_setIl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#unlock">unlock</a></span> <span class="id"><a href="mathcomp.classical.cardinality.html#in_fset_set">in_fset_set</a></span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIAC">setIAC</a></span>; <span class="id">exact</span>/<span class="id"><a href="mathcomp.classical.cardinality.html#finite_setIl">finite_setIl</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> =&gt; -[[<span class="id">Ai</span> <span class="id">Bi</span>] <span class="id">Fi0</span>]; <span class="id">rewrite</span> !<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>/= <span class="id"><a href="mathcomp.classical.cardinality.html#in_fset_set">in_fset_set</a></span>// !<span class="id"><a href="mathcomp.classical.classical_sets.html#mem_set">mem_set</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id">big_fsetID</span> <span class="id">_</span> [<span class="id">pred</span> <span class="id">i</span> | <span class="id">i</span> \<span class="kwd">in</span> <span class="id">B</span>])/= [<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#locked_with">locked_with</a></span> <span class="id">_</span> <span class="id">_</span>]<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#unlock">unlock</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">fsbig_setI</span>; <span class="id">congr</span> (<span class="id">op</span> <span class="id">_</span> <span class="id">_</span>); <span class="id">rewrite</span> -<span class="id">fsbig_setI</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span> <span class="id">eq_fbigl</span> =&gt; <span class="id">i</span>; <span class="id">rewrite</span> !<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#in_setC">in_setC</a></span>.<br/>
Qed.</div>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#__deprecated__full_fsbigID">__deprecated__full_fsbigID</a></span> {<span class="id">R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">I</span>} <span class="id">B</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbigID">fsbigID</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">A</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span>) <span class="id">F</span> <span class="id">i</span> = <span class="id">op</span> (\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span> `&amp;` <span class="id">B</span>) <span class="id">F</span> <span class="id">i</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span> `&amp;` ~` <span class="id">B</span>) <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Afin</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#__deprecated__full_fsbigID">__deprecated__full_fsbigID</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.cardinality.html#finite_setIl">finite_setIl</a></span>. Qed.</div>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigID">fsbigID</a></span> {<span class="id">R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">I</span>} <span class="id">B</span>.<br/>
<br/>
#[<span class="id">deprecated</span>(<span class="id">note</span>="<span class="id">Use</span> <span class="id">fsbigID</span> <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id"><a name="full_fsbigID">full_fsbigID</a></span> := <span class="id"><a href="mathcomp.classical.fsbigop.html#__deprecated__full_fsbigID">__deprecated__full_fsbigID</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbigU">fsbigU</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">A</span> <span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">B</span> -&gt; <span class="id">A</span> `&amp;` <span class="id">B</span> `&lt;=` <span class="id">F</span> @^-1` [<span class="id">set</span> <span class="id">idx</span>] -&gt;<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span> `|` <span class="id">B</span>) <span class="id">F</span> <span class="id">i</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">op</span> (\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span>) <span class="id">F</span> <span class="id">i</span>) (\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">B</span>) <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
<span class="id">move</span>=&gt; <span class="id">Afin</span> <span class="id">Bfin</span> <span class="id">AB0</span>; <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigID">fsbigID</a></span> <span class="id">A</span>) ?<span class="id"><a href="mathcomp.classical.cardinality.html#finite_setU">finite_setU</a></span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">split</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setUK">setUK</a></span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">setDE</a></span>; <span class="id">congr</span> (<span class="id">op</span> <span class="id">_</span> <span class="id">_</span>); <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">setDE</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIUl">setIUl</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setICr">setICr</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0U">set0U</a></span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_widen">fsbig_widen</a></span> =&gt; //; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">setDE</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDD">setDD</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIC">setIC</a></span>.<br/>
Qed.</div>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigU">fsbigU</a></span> {<span class="id">R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">I</span>} [<span class="id">A</span> <span class="id">B</span> <span class="id">F</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbigU0">fsbigU0</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">A</span> <span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">B</span> -&gt; <span class="id">A</span> `&amp;` <span class="id">B</span> `&lt;=` <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span> `|` <span class="id">B</span>) <span class="id">F</span> <span class="id">i</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">op</span> (\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span>) <span class="id">F</span> <span class="id">i</span>) (\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">B</span>) <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Af</span> <span class="id">Bf</span> <span class="id">AB0</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigU">fsbigU</a></span>// =&gt; <span class="id">x</span> /<span class="id">AB0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbigD1">fsbigD1</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">i</span> : <span class="id">I</span>) (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">A</span> -&gt; <span class="id">A</span> <span class="id">i</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">j</span> \<span class="kwd">in</span> <span class="id">A</span>) <span class="id">F</span> <span class="id">j</span> = <span class="id">op</span> (<span class="id">F</span> <span class="id">i</span>) (\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">j</span> \<span class="kwd">in</span> <span class="id">A</span> `\ <span class="id">i</span>) <span class="id">F</span> <span class="id">j</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigID">fsbigID</a></span> [<span class="id">set</span> <span class="id">i</span>]) ?<span class="id"><a href="mathcomp.classical.classical_sets.html#setI1">setI1</a></span> ?<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifT">ifT</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> ?<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_set1">fsbig_set1</a></span>. Qed.</div>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigD1">fsbigD1</a></span> {<span class="id">R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">I</span>} <span class="id">i</span> <span class="id">A</span> <span class="id">F</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="full_fsbig_distrr">full_fsbig_distrr</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">zero</span> : <span class="id">R</span>) (<span class="id">times</span> : <span class="id">Monoid.mul_law</span> <span class="id">zero</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">plus</span> : <span class="id">Monoid.add_law</span> <span class="id">zero</span> <span class="id">times</span>) (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">a</span> : <span class="id">R</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> (<span class="id">P</span> `&amp;` <span class="id">F</span> @^-1` [<span class="id">set</span>~ <span class="id">zero</span>]) -&gt;<br/>
&nbsp;&nbsp;<span class="id">times</span> <span class="id">a</span> (\<span class="id">big</span>[<span class="id">plus</span>/<span class="id">zero</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>) =<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">plus</span>/<span class="id">zero</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">times</span> <span class="id">a</span> (<span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
<span class="id">move</span>=&gt; <span class="id">finF</span>; <span class="id">elim</span>/<span class="id"><a href="mathcomp.classical.boolp.html#Peq">Peq</a></span> : <span class="id">R</span> =&gt; <span class="id">R</span> <span class="kwd">in</span> <span class="id">zero</span> <span class="id">times</span> <span class="id">plus</span> <span class="id">a</span> <span class="id">F</span> <span class="id">finF</span> *.<br/>
<span class="id">have</span> [-&gt;|<span class="id">a0</span>] := <span class="id">eqVneq</span> <span class="id">a</span> <span class="id">zero</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">Monoid.mul0m</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig1">fsbig1</a></span>//; <span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">Monoid.mul0m</span>.<br/>
<span class="id">rewrite</span> <span class="id">big_distrr</span> [<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS</a></span>](<span class="id"><a href="mathcomp.classical.fsbigop.html#full_fsbigID">full_fsbigID</a></span> (<span class="id">F</span> @^-1` [<span class="id">set</span> <span class="id">zero</span>])); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.cardinality.html#sub_finite_set">sub_finite_set</a></span> <span class="id">finF</span> =&gt; <span class="id">x</span> /= [<span class="id">Px</span> <span class="id">aFN0</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">split</span>=&gt; //; <span class="id">apply</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#contra_not">contra_not</a></span> <span class="id">aFN0</span> =&gt; -&gt;; <span class="id">rewrite</span> <span class="id">Monoid.simpm</span>.<br/>
<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">plus</span> <span class="id">X</span> <span class="id">_</span>](<span class="id">_</span> : <span class="id">_</span> = <span class="id">zero</span>) ?<span class="id">Monoid.simpm</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig1">fsbig1</a></span>// =&gt; <span class="id">i</span> [<span class="id">_</span> -&gt;]; <span class="id">rewrite</span> <span class="id">Monoid.simpm</span>.<br/>
<span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#esym">esym</a></span>/<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_fwiden">fsbig_fwiden</a></span> =&gt; //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> [<span class="id">Px</span> <span class="id">Fx0</span>]; <span class="id">rewrite</span> /= <span class="id"><a href="mathcomp.classical.fsbigop.html#in_finite_support">in_finite_support</a></span>// <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>.<br/>
<span class="id">move</span>=&gt; <span class="id">i</span> []; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#preimage">preimage</a></span>/= <span class="id"><a href="mathcomp.classical.fsbigop.html#in_finite_support">in_finite_support</a></span> //.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> =&gt; -[<span class="id">Pi</span>]; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#preimage">preimage</a></span>/= =&gt; <span class="id">Fi0</span>; <span class="id">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbig_distrr">fsbig_distrr</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">zero</span> : <span class="id">R</span>) (<span class="id">times</span> : <span class="id">Monoid.mul_law</span> <span class="id">zero</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">plus</span> : <span class="id">Monoid.add_law</span> <span class="id">zero</span> <span class="id">times</span>) (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">a</span> : <span class="id">R</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">P</span>  -&gt;<br/>
&nbsp;&nbsp;<span class="id">times</span> <span class="id">a</span> (\<span class="id">big</span>[<span class="id">plus</span>/<span class="id">zero</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>) =<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">plus</span>/<span class="id">zero</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">times</span> <span class="id">a</span> (<span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Pf</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#full_fsbig_distrr">full_fsbig_distrr</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.cardinality.html#finite_setIl">finite_setIl</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="mulr_fsumr">mulr_fsumr</a></span> (<span class="id">R</span> : <span class="id">idomainType</span>) (<span class="id">I</span> : <span class="id">choiceType</span>) <span class="id">a</span> (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;<span class="id">a</span> * (\<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>) = \<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">a</span> * <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
<span class="id">have</span> [-&gt;|<span class="id">aN0</span>] := <span class="id">eqVneq</span> <span class="id">a</span> 0; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">mul0r</span> <span class="id">big1</span>// =&gt; <span class="id">i</span>; <span class="id">rewrite</span> <span class="id">mul0r</span>.<br/>
<span class="id">case</span>: (<span class="id"><a href="mathcomp.classical.boolp.html#pselect">pselect</a></span> (<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> (<span class="id">P</span> `&amp;` <span class="id">F</span> @^-1` [<span class="id">set</span>~ 0]))) =&gt; <span class="id">PFfin</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#full_fsbig_distrr">full_fsbig_distrr</a></span>.<br/>
<span class="id">rewrite</span> !<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_dflt">fsbig_dflt</a></span> ?<span class="id">mulr0</span>//; <span class="id">apply</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#contra_not">contra_not</a></span> <span class="id">PFfin</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.cardinality.html#sub_finite_set">sub_finite_set</a></span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> [<span class="id">Px</span> /<span class="id">eqP</span> <span class="id">Fx0</span>]; <span class="id">split</span>=&gt; //=; <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">mulf_neq0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="mulr_fsuml">mulr_fsuml</a></span> (<span class="id">R</span> : <span class="id">idomainType</span>) (<span class="id">I</span> : <span class="id">choiceType</span>) <span class="id">a</span> (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;(\<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>) * <span class="id">a</span> = \<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) (<span class="id">F</span> <span class="id">i</span> * <span class="id">a</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">mulrC</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#mulr_fsumr">mulr_fsumr</a></span>; <span class="id">under</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#eq_fsbigr">eq_fsbigr</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">mulrC</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbig_ord">fsbig_ord</a></span> <span class="id">R</span> (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>) <span class="id">n</span> (<span class="id">F</span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">a</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">a</span> = \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">a</span> \<span class="kwd">in</span> `<span class="id">I_n</span>) <span class="id">F</span> <span class="id">a</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
<span class="id">rewrite</span> -(<span class="id">big_mkord</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#xpredT">xpredT</a></span>) [<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS</a></span>]<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_seq">fsbig_seq</a></span> ?<span class="id">iota_uniq</span>//.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#eq_fsbigl">eq_fsbigl</a></span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#Iiota">Iiota</a></span> /<span class="id">index_iota</span> <span class="id">subn0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbig_finite">fsbig_finite</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>) (<span class="id">T</span> : <span class="id">choiceType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">D</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) (<span class="id">F</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) : <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">D</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">x</span> \<span class="kwd">in</span> <span class="id">D</span>) <span class="id">F</span> <span class="id">x</span> = \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">x</span> &lt;- <span class="id"><a href="mathcomp.classical.cardinality.html#fset_set">fset_set</a></span> <span class="id">D</span>) <span class="id">F</span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
<span class="id">elim</span>/<span class="id"><a href="mathcomp.classical.boolp.html#Peq">Peq</a></span>: <span class="id">R</span> =&gt; <span class="id">R</span> <span class="kwd">in</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">F</span> * =&gt; <span class="id">Dfin</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_fwiden">fsbig_fwiden</a></span>; <span class="id">rewrite</span> ?<span class="id"><a href="mathcomp.classical.cardinality.html#fset_setK">fset_setK</a></span>// <span class="id"><a href="mathcomp.classical.classical_sets.html#setDv">setDv</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="fsbig2">fsbig2</a></span>.<br/>
<span class="kwd">Variables</span> (<span class="id"><a name="fsbig2.R">R</a></span> : <span class="kwd">Type</span>) (<span class="id"><a name="fsbig2.idx">idx</a></span> : <span class="id">R</span>) (<span class="id"><a name="fsbig2.op">op</a></span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="reindex_fsbig">reindex_fsbig</a></span> {<span class="id">I</span> <span class="id">J</span> : <span class="id">choiceType</span>} (<span class="id">h</span> : <span class="id">I</span> -&gt; <span class="id">J</span>) <span class="id">P</span> <span class="id">Q</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">F</span> : <span class="id">J</span> -&gt; <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.R">R</a></span>) : <span class="id"><a href="mathcomp.classical.functions.html#set_bij">set_bij</a></span> <span class="id">P</span> <span class="id">Q</span> <span class="id">h</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.op">op</a></span>/<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.idx">idx</a></span>]<span class="id">_</span>(<span class="id">j</span> \<span class="kwd">in</span> <span class="id">Q</span>) <span class="id">F</span> <span class="id">j</span> = \<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.op">op</a></span>/<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.idx">idx</a></span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> (<span class="id">h</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
<span class="id">elim</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#choicePpointed">choicePpointed</a></span>: <span class="id">I</span> =&gt; <span class="id">I</span> <span class="kwd">in</span> <span class="id">h</span> <span class="id">P</span> *.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> !<span class="id"><a href="mathcomp.classical.cardinality.html#emptyE">emptyE</a></span> =&gt; /<span class="id"><a href="mathcomp.classical.functions.html#Pbij">Pbij</a></span>[{}<span class="id">h</span> -&gt;].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -[<span class="kwd">in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS</a></span>](<span class="id"><a href="mathcomp.classical.functions.html#image_eq">image_eq</a></span> <span class="id">h</span>) <span class="id"><a href="mathcomp.classical.classical_sets.html#image_set0">image_set0</a></span> !<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_set0">fsbig_set0</a></span>.<br/>
<span class="id">elim</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#choicePpointed">choicePpointed</a></span>: <span class="id">J</span> =&gt; <span class="id">J</span> <span class="kwd">in</span> <span class="id">F</span> <span class="id">h</span> <span class="id">Q</span> *; <span class="id">first</span> <span class="kwd">by</span> <span class="id">have</span> := <span class="id"><a href="mathcomp.classical.classical_sets.html#no">no</a></span> (<span class="id">h</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#point">point</a></span>).<br/>
<span class="id">move</span>=&gt; /(@<span class="id"><a href="mathcomp.classical.functions.html#pPbij">pPbij</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>)[{}<span class="id">h</span> -&gt;].<br/>
<span class="id">pose</span> <span class="id">A</span> := <span class="id">P</span> `&amp;` (<span class="id">F</span> \<span class="id">o</span> <span class="id">h</span>) @^-1` [<span class="id">set</span>~ <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.idx">idx</a></span>].<br/>
<span class="id">pose</span> <span class="id">B</span> := <span class="id">Q</span> `&amp;` <span class="id">F</span> @^-1` [<span class="id">set</span>~ <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.idx">idx</a></span>].<br/>
<span class="id">have</span> /(@<span class="id"><a href="mathcomp.classical.functions.html#pPbij">pPbij</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>)[<span class="id">g</span> <span class="id">gh</span>] : <span class="id"><a href="mathcomp.classical.functions.html#set_bij">set_bij</a></span> <span class="id">A</span> <span class="id">B</span> <span class="id">h</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#splitbij_sub">splitbij_sub</a></span>; <span class="id">rewrite</span> /<span class="id">A</span> /<span class="id">B</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#preimage">preimage</a></span> //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> [<span class="id">Px</span> <span class="id">Fhx</span>]; <span class="id">split</span>=&gt; //; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> [<span class="id">Qx</span> <span class="id">Fx</span>]; <span class="id">split</span>; <span class="id">rewrite</span> ?<span class="id"><a href="mathcomp.classical.functions.html#invK">invK</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>//; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span>.<br/>
<span class="id">case</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP</a></span>; <span class="id">rewrite</span> ?<span class="id">big_nil</span>//=.<br/>
&nbsp;&nbsp;<span class="id">case</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP</a></span>; <span class="id">rewrite</span> ?<span class="id">big_nil</span>//=.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">X</span> <span class="id">XP</span> <span class="id">_</span> <span class="id">XE</span> []; <span class="id">rewrite</span> -/<span class="id">B</span> -(<span class="id"><a href="mathcomp.classical.functions.html#image_eq">image_eq</a></span> <span class="id">g</span>) /<span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.cardinality.html#finite_image">finite_image</a></span>; <span class="id">rewrite</span> -<span class="id">XE</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">Y</span> <span class="id">YQ</span> <span class="id">Fidx</span> <span class="id">YE</span>; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP</a></span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; []; <span class="id">rewrite</span> -/<span class="id">A</span> -(<span class="id"><a href="mathcomp.classical.functions.html#image_eq">image_eq</a></span> [<span class="id">bij</span> <span class="id">of</span> <span class="id">g</span>^-1%<span class="id">FUN</span>]).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.cardinality.html#finite_image">finite_image</a></span>; <span class="id">rewrite</span> /<span class="id">B</span> -<span class="id">YE</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">X</span> <span class="id">XP</span> <span class="id">Fhidx</span> <span class="id">XE</span>; <span class="id">suff</span> -&gt; : <span class="id">Y</span> = (<span class="id">h</span> @` <span class="id">X</span>)%<span class="id">fset</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_imfset</span>// =&gt; ? ? ? ? /<span class="id"><a href="mathcomp.classical.functions.html#inj">inj</a></span>; <span class="id">apply</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>; <span class="id">apply</span>: <span class="id">XP</span>.<br/>
<span class="id">have</span> <span class="id">BY</span> <span class="id">j</span> : (<span class="id">B</span> <span class="id">j</span>) = (<span class="id">j</span> \<span class="kwd">in</span> <span class="id">Y</span>) <span class="kwd">by</span> <span class="id">rewrite</span> -[<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS</a></span>]/([<span class="id">set</span>` <span class="id">Y</span>] <span class="id">j</span>) <span class="id">YE</span>.<br/>
<span class="id">have</span> <span class="id">AX</span> <span class="id">i</span> : (<span class="id">A</span> <span class="id">i</span>) = (<span class="id">i</span> \<span class="kwd">in</span> <span class="id">X</span>) <span class="kwd">by</span> <span class="id">rewrite</span> -[<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS</a></span>]/([<span class="id">set</span>` <span class="id">X</span>] <span class="id">i</span>) <span class="id">XE</span>.<br/>
<span class="id">rewrite</span> <span class="id">gh</span>; <span class="id">apply</span>/<span class="id">fsetP</span>=&gt; <span class="id">j</span>; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#idP">idP</a></span>/<span class="id">imfsetP</span> =&gt; [<span class="id">Yj</span> | [<span class="id">i</span> <span class="id">iX</span> -&gt;]]; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">BY</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span>; <span class="id">rewrite</span> <span class="id">AX</span>.<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">g</span>^-1%<span class="id">FUN</span> <span class="id">j</span>); <span class="id">rewrite</span> ?<span class="id"><a href="mathcomp.classical.functions.html#invK">invK</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> ?<span class="id">BY</span>// -<span class="id">AX</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span>; <span class="id">rewrite</span> <span class="id">BY</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbig_image">fsbig_image</a></span> {<span class="id">I</span> <span class="id">J</span> : <span class="id">choiceType</span>} <span class="id">P</span> (<span class="id">h</span> : <span class="id">I</span> -&gt; <span class="id">J</span>) (<span class="id">F</span> : <span class="id">J</span> -&gt; <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.R">R</a></span>) : <span class="id"><a href="mathcomp.classical.functions.html#set_inj">set_inj</a></span> <span class="id">P</span> <span class="id">h</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.op">op</a></span>/<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.idx">idx</a></span>]<span class="id">_</span>(<span class="id">j</span> \<span class="kwd">in</span> <span class="id">h</span> @` <span class="id">P</span>) <span class="id">F</span> <span class="id">j</span> = \<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.op">op</a></span>/<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.idx">idx</a></span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> (<span class="id">h</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id"><a href="mathcomp.classical.functions.html#inj_bij">inj_bij</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#reindex_fsbig">reindex_fsbig</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="__deprecated__reindex_inside">__deprecated__reindex_inside</a></span> {<span class="id">I</span> <span class="id">J</span> : <span class="id">choiceType</span>} <span class="id">P</span> <span class="id">Q</span> (<span class="id">h</span> : <span class="id">I</span> -&gt; <span class="id">J</span>) (<span class="id">F</span> : <span class="id">J</span> -&gt; <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.R">R</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#bijective">bijective</a></span> <span class="id">h</span> -&gt; <span class="id">P</span> `&lt;=` <span class="id">h</span> @` <span class="id">Q</span> -&gt; <span class="id">Q</span> `&lt;=` <span class="id">h</span> @^-1` <span class="id">P</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.op">op</a></span>/<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.idx">idx</a></span>]<span class="id">_</span>(<span class="id">j</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">j</span> = \<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.op">op</a></span>/<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.idx">idx</a></span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">Q</span>) <span class="id">F</span> (<span class="id">h</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
<span class="id">move</span>=&gt; <span class="id">hbij</span> <span class="id">PQ</span> <span class="id">QP</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#reindex_fsbig">reindex_fsbig</a></span>; <span class="id">split</span>=&gt; //.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">y</span> <span class="id">_</span> <span class="id">_</span> /(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#bij_inj">bij_inj</a></span> <span class="id">hbij</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="reindex_fsbigT">reindex_fsbigT</a></span> {<span class="id">I</span> <span class="id">J</span> : <span class="id">choiceType</span>} (<span class="id">h</span> : <span class="id">I</span> -&gt; <span class="id">J</span>) (<span class="id">F</span> : <span class="id">J</span> -&gt; <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.R">R</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#bijective">bijective</a></span> <span class="id">h</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.op">op</a></span>/<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.idx">idx</a></span>]<span class="id">_</span>(<span class="id">j</span> \<span class="kwd">in</span> [<span class="id">set</span>: <span class="id">J</span>]) <span class="id">F</span> <span class="id">j</span> = \<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.op">op</a></span>/<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2.idx">idx</a></span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> [<span class="id">set</span>: <span class="id">I</span>]) <span class="id">F</span> (<span class="id">h</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.functions.html#setTT_bijective">setTT_bijective</a></span> =&gt; -[? ? ?]; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#reindex_fsbig">reindex_fsbig</a></span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig2">fsbig2</a></span>.<br/>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#reindex_fsbig">reindex_fsbig</a></span> {<span class="id">R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">I</span> <span class="id">J</span>} <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_image">fsbig_image</a></span> {<span class="id">R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">I</span> <span class="id">J</span>} <span class="id">_</span> <span class="id">_</span>.<br/>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#__deprecated__reindex_inside">__deprecated__reindex_inside</a></span> {<span class="id">R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">I</span> <span class="id">J</span>} <span class="id">_</span> <span class="id">_</span>.<br/>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#reindex_fsbigT">reindex_fsbigT</a></span> {<span class="id">R</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">I</span> <span class="id">J</span>} <span class="id">_</span> <span class="id">_</span>.<br/>
#[<span class="id">deprecated</span>(<span class="id">note</span>="<span class="id">use</span> <span class="id">reindex_fsbig</span>, <span class="id">fsbig_image</span> <span class="id">or</span> <span class="id">reindex_fsbigT</span> <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id"><a name="reindex_inside">reindex_inside</a></span> := <span class="id"><a href="mathcomp.classical.fsbigop.html#__deprecated__reindex_inside">__deprecated__reindex_inside</a></span>.<br/>
#[<span class="id">deprecated</span>(<span class="id">note</span>="<span class="id">use</span> <span class="id">reindex_fsbigT</span> <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id"><a name="reindex_inside_setT">reindex_inside_setT</a></span> := <span class="id"><a href="mathcomp.classical.fsbigop.html#reindex_fsbigT">reindex_fsbigT</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbigN1">fsbigN1</a></span> (<span class="id">R</span> : <span class="id">eqType</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">T1</span> <span class="id">T2</span> : <span class="id">choiceType</span>) (<span class="id">Q</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T2</span>) (<span class="id">f</span> : <span class="id">T1</span> -&gt; <span class="id">T2</span> -&gt; <span class="id">R</span>) (<span class="id">x</span> : <span class="id">T1</span>) :<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">y</span> \<span class="kwd">in</span> <span class="id">Q</span>) <span class="id">f</span> <span class="id">x</span> <span class="id">y</span> != <span class="id">idx</span> -&gt; <span class="kwd">exists2</span> <span class="id">y</span>, <span class="id">Q</span> <span class="id">y</span> &amp; <span class="id">f</span> <span class="id">x</span> <span class="id">y</span> != <span class="id">idx</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
<span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.boolp.html#contra_neqP">contra_neqP</a></span> =&gt; /<span class="id"><a href="mathcomp.classical.boolp.html#forall2NP">forall2NP</a></span> <span class="id">Qf</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig1">fsbig1</a></span> =&gt; <span class="id">y</span> <span class="id">Qy</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: (<span class="id">Qf</span> <span class="id">y</span>) =&gt; // /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">negP</a></span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negPn">negPn</a></span>/<span class="id">eqP</span>-&gt;.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbig_split">fsbig_split</a></span> (<span class="id">T</span> : <span class="id">choiceType</span>) (<span class="id">R</span> : <span class="id">eqType</span>) (<span class="id">idx</span> : <span class="id">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) (<span class="id">f</span> <span class="id">g</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) : <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">P</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">x</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">op</span> (<span class="id">f</span> <span class="id">x</span>) (<span class="id">g</span> <span class="id">x</span>) =<br/>
&nbsp;&nbsp;<span class="id">op</span> (\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">x</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">f</span> <span class="id">x</span>) (\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">x</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">g</span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Pfin</span>; <span class="id">rewrite</span> !<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_finite">fsbig_finite</a></span>// <span class="id">big_split</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsumr_ge0">fsumr_ge0</a></span> (<span class="id">R</span> : <span class="id">numDomainType</span>) (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; 0 &lt;= <span class="id">F</span> <span class="id">i</span>) -&gt; 0 &lt;= \<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
<span class="id">move</span>=&gt; <span class="id">PF</span>; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP</a></span>; <span class="id">rewrite</span> ?<span class="id">big_nil</span>// =&gt; <span class="id">X</span> <span class="id">XP</span> <span class="id">F0</span> <span class="id">_</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_seq_cond</span> <span class="id">big_mkcondr</span> <span class="id">sumr_ge0</span>// =&gt; <span class="id">i</span> /<span class="id">XP</span>/<span class="id">PF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsumr_le0">fsumr_le0</a></span> (<span class="id">R</span> : <span class="id">numDomainType</span>) (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">F</span> <span class="id">i</span> &lt;= 0) -&gt; \<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> &lt;= 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
<span class="id">move</span>=&gt; <span class="id">PF</span>; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP</a></span>; <span class="id">rewrite</span> ?<span class="id">big_nil</span>// =&gt; <span class="id">X</span> <span class="id">XP</span> <span class="id">F0</span> <span class="id">_</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_seq_cond</span> <span class="id">big_mkcondr</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#sumr_le0">sumr_le0</a></span>// =&gt; <span class="id">i</span> /<span class="id">XP</span>/<span class="id">PF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsumr_gt0">fsumr_gt0</a></span> (<span class="id">R</span> : <span class="id">realDomainType</span>) (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">r</span> : <span class="id">seq</span> <span class="id">I</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;0 &lt; \<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> -&gt; <span class="kwd">exists2</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> &amp; 0 &lt; <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
<span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.boolp.html#contraPP">contraPP</a></span> =&gt; /<span class="id"><a href="mathcomp.classical.boolp.html#forall2NP">forall2NP</a></span> <span class="id">xNPF</span>; <span class="id">rewrite</span> <span class="id">le_gtF</span>// <span class="id"><a href="mathcomp.classical.fsbigop.html#fsumr_le0">fsumr_le0</a></span>// =&gt; <span class="id">i</span> <span class="id">Pi</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: (<span class="id">xNPF</span> <span class="id">i</span>) =&gt; // /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">negP</a></span>; <span class="id">case</span>: <span class="id">ltP</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsumr_lt0">fsumr_lt0</a></span> (<span class="id">R</span> : <span class="id">realDomainType</span>) (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> &lt; 0 -&gt; <span class="kwd">exists2</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> &amp; <span class="id">F</span> <span class="id">i</span> &lt; 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
<span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.boolp.html#contraPP">contraPP</a></span> =&gt; /<span class="id"><a href="mathcomp.classical.boolp.html#forall2NP">forall2NP</a></span> <span class="id">xNPF</span>; <span class="id">rewrite</span> <span class="id">le_gtF</span>// <span class="id"><a href="mathcomp.classical.fsbigop.html#fsumr_ge0">fsumr_ge0</a></span>// =&gt; <span class="id">i</span> <span class="id">Pi</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: (<span class="id">xNPF</span> <span class="id">i</span>) =&gt; // /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">negP</a></span>; <span class="id">case</span>: <span class="id">ltP</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pfsumr_eq0">pfsumr_eq0</a></span> (<span class="id">R</span> : <span class="id">realDomainType</span>) (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">P</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; 0 &lt;= <span class="id">F</span> <span class="id">i</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = 0 -&gt; <span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">F</span> <span class="id">i</span> = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
<span class="id">move</span>=&gt; <span class="id">Pfin</span> <span class="id">F0</span> /<span class="id">eqP</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.boolp.html#contraTP">contraTP</a></span> =&gt; /<span class="id"><a href="mathcomp.classical.boolp.html#existsPNP">existsPNP</a></span>[<span class="id">i</span> <span class="id">Pi</span> /<span class="id">eqP</span> <span class="id">Fi0</span>].<br/>
<span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigD1">fsbigD1</a></span> <span class="id">i</span>)//= <span class="id">paddr_eq0</span> ?<span class="id">F0</span> ?<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negb_and">negb_and</a></span> ?<span class="id">Fi0</span>//.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsumr_ge0">fsumr_ge0</a></span>// =&gt; <span class="id">j</span> [/<span class="id">F0</span>-&gt;].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbig_setU">fsbig_setU</a></span> {<span class="id">T</span>} {<span class="id">I</span> : <span class="id">choiceType</span>} (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">A</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.classical_sets.html#setU">setU</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">A</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Afin</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_finite">fsbig_finite</a></span>// <span class="id"><a href="mathcomp.classical.cardinality.html#bigsetU_fset_set">bigsetU_fset_set</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsbig_setU_set1">fsbig_setU_set1</a></span> {<span class="id">T</span> : <span class="id">choiceType</span>} (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">A</span> -&gt; \<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.classical_sets.html#setU">setU</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>]<span class="id">_</span>(<span class="id">x</span> \<span class="kwd">in</span> <span class="id">A</span>) [<span class="id">set</span> <span class="id">x</span>] = <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
<span class="id">move</span>=&gt; <span class="id">fA</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_setU">fsbig_setU</a></span>//.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span>=&gt; [<span class="id">t</span> [<span class="id">x</span> <span class="id">Ax</span> -&gt;]//|<span class="id">t</span> <span class="id">At</span>]; <span class="kwd">exists</span> <span class="id">t</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pair_fsbig">pair_fsbig</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">I</span> <span class="id">J</span> : <span class="id">choiceType</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">Q</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">J</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">J</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">P</span> -&gt; <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">Q</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">j</span> \<span class="kwd">in</span> <span class="id">Q</span>) <span class="id">F</span> <span class="id">i</span> <span class="id">j</span><br/>
&nbsp;&nbsp;= \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">p</span> \<span class="kwd">in</span> <span class="id">P</span> `*` <span class="id">Q</span>) <span class="id">F</span> <span class="id">p</span>.1 <span class="id">p</span>.2.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
<span class="id">move</span>=&gt; <span class="id">Pfin</span> <span class="id">Qfin</span>; <span class="id">have</span> <span class="id">PQfin</span> : <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> (<span class="id">P</span> `*` <span class="id">Q</span>) <span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.cardinality.html#finite_setM">finite_setM</a></span>.<br/>
<span class="id">rewrite</span> !<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_finite">fsbig_finite</a></span>//=; <span class="id">under</span> <span class="id">eq_bigr</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_finite">fsbig_finite</a></span>//=.<br/>
<span class="id">rewrite</span> <span class="id">pair_big_dep_cond</span>/= <span class="id"><a href="mathcomp.classical.cardinality.html#fset_setM">fset_setM</a></span>//.<br/>
<span class="id">apply</span>: <span class="id">eq_fbigl</span> =&gt; -[<span class="id">i</span> <span class="id">j</span>] //=; <span class="id">apply</span>/<span class="id">imfset2P</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#idP">idP</a></span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> //=.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">x</span> + [<span class="id">y</span> + [-&gt; -&gt;]]]; <span class="id">rewrite</span> 4!<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>/= !<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbT">andbT</a></span>/= =&gt; -&gt; -&gt;.<br/>
<span class="id">move</span>=&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[<span class="id">Pi</span> <span class="id">Qi</span>]; <span class="kwd">exists</span> <span class="id">i</span>; <span class="id">rewrite</span> 2?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> ?<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbT">andbT</a></span>//.<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">j</span>; <span class="id">rewrite</span> 2?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> ?<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbT">andbT</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="exchange_fsbig">exchange_fsbig</a></span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>) (<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">I</span> <span class="id">J</span> : <span class="id">choiceType</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">Q</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">J</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">J</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">P</span> -&gt; <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">Q</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">j</span> \<span class="kwd">in</span> <span class="id">Q</span>) <span class="id">F</span> <span class="id">i</span> <span class="id">j</span><br/>
&nbsp;&nbsp;= \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">j</span> \<span class="kwd">in</span> <span class="id">Q</span>) \<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> <span class="id">j</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
<span class="id">move</span>=&gt; <span class="id">Pfin</span> <span class="id">Qfin</span>; <span class="id">rewrite</span> 2?<span class="id"><a href="mathcomp.classical.fsbigop.html#pair_fsbig">pair_fsbig</a></span>//; <span class="id">pose</span> <span class="id">swap</span> (<span class="id">x</span> : <span class="id">I</span> * <span class="id">J</span>) := (<span class="id">x</span>.2, <span class="id">x</span>.1).<br/>
<span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#esym">esym</a></span>/(<span class="id"><a href="mathcomp.classical.fsbigop.html#reindex_fsbig">reindex_fsbig</a></span> <span class="id">swap</span>).<br/>
<span class="id">split</span>=&gt; [? [? ?]//|[? ?] [? ?] /<span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem">set_mem</a></span>[? ?] /<span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem">set_mem</a></span>[? ?] [-&gt; -&gt;]//|].<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">i</span> <span class="id">j</span>] [? ?]; <span class="kwd">exists</span> (<span class="id">j</span>, <span class="id">i</span>).<br/>
Qed.</div>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
